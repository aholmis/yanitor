@page "/components"
@page "/{culture}/components"
@using System.Globalization
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<Components> L
@inject NavigationManager Navigation

<PageTitle>@L["PageTitle"]</PageTitle>

<section class="components">
    <header class="components__header">
        <button class="components__back-button" @onclick="NavigateBack" aria-label="@L["BackToMyHouse"]">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <div class="components__header-content">
            <h1 class="components__title">@L["PageTitle"]</h1>
            <p class="components__subtitle">@L["Subtitle"]</p>
        </div>
    </header>

    <div class="components__list">
        @if (_components.Count == 0)
        {
            <div class="components__empty">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M9 22V12h6v10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p>@L["NoComponents"]</p>
            </div>
        }
        else
        {
            @foreach (var component in _components)
            {
                <article class="components__item">
                    <div class="components__item-icon">
                        @GetComponentIcon(component.Type)
                    </div>
                    <div class="components__item-content">
                        <h2 class="components__item-name">@component.Name</h2>
                        <p class="components__item-type">@component.Type</p>
                    </div>
                </article>
            }
        }
    </div>
</section>

@code {
    [Parameter]
    public string? Culture { get; set; }

    // Mock data - replace with actual data service later
    private List<HouseComponent> _components = new()
    {
        new HouseComponent { Name = "Main HVAC System", Type = "HVAC" },
        new HouseComponent { Name = "Water Heater", Type = "Plumbing" },
        new HouseComponent { Name = "Front Door", Type = "Door" },
        new HouseComponent { Name = "Living Room Window", Type = "Window" },
        new HouseComponent { Name = "Kitchen Sink", Type = "Plumbing" },
        new HouseComponent { Name = "Garage Door Opener", Type = "Garage" },
        new HouseComponent { Name = "Smoke Detector - Hallway", Type = "Safety" },
        new HouseComponent { Name = "Roof Shingles", Type = "Roof" },
        new HouseComponent { Name = "Gutter System", Type = "Exterior" },
        new HouseComponent { Name = "Air Filter", Type = "HVAC" },
        new HouseComponent { Name = "Sump Pump", Type = "Plumbing" },
        new HouseComponent { Name = "Attic Insulation", Type = "Insulation" }
    };

    private void NavigateBack()
    {
        if (!string.IsNullOrEmpty(Culture))
        {
            Navigation.NavigateTo($"/{Culture}/my-house");
        }
        else
        {
            Navigation.NavigateTo("/my-house");
        }
    }

    private RenderFragment GetComponentIcon(string type) => type switch
    {
        "HVAC" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M14 3v4a1 1 0 001 1h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M12 11v6M9 14h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Plumbing" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            <path d="M12 1v6m0 6v6M23 12h-6m-6 0H5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Door" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="6" y="3" width="12" height="18" rx="1" stroke="currentColor" stroke-width="2"/>
            <circle cx="15" cy="12" r="1" fill="currentColor"/>
        </svg>,
        "Window" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
            <path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2"/>
        </svg>,
        "Garage" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M4 22V6l8-4 8 4v16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M8 22V12h8v10M8 15h8M8 18h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Safety" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Roof" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 9l9-7 9 7M19 9v11a2 2 0 01-2 2H7a2 2 0 01-2-2V9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Exterior" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        "Insulation" => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M21 16V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2h14a2 2 0 002-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M7 10h2M7 14h2M12 10h2M12 14h2M17 10h2M17 14h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>,
        _ => @<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    };

    private record HouseComponent
    {
        public required string Name { get; init; }
        public required string Type { get; init; }
    }
}
